<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>怎么发布 jsr 包？有哪些注意点？ | 羽痕爱编程</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="JavaScript Registry (JSR) 是 JavaScript 和 TypeScript 的现代化软件包仓库。JSR 适用于许多运行时（Node.js、Deno、浏览器等），并且向后兼容 npm。 那么，怎么发布 jsr 包？1. 访问官网并使用 Github 授权登录官网：https:&#x2F;&#x2F;jsr.io&#x2F; 2. 通过官网新发布一个包，填写 Scope 和 Package name 3">
<meta property="og:type" content="article">
<meta property="og:title" content="怎么发布 jsr 包？有哪些注意点？">
<meta property="og:url" content="http://yuhenabc.com/2024/07/12/publish-jsr/index.html">
<meta property="og:site_name" content="羽痕爱编程">
<meta property="og:description" content="JavaScript Registry (JSR) 是 JavaScript 和 TypeScript 的现代化软件包仓库。JSR 适用于许多运行时（Node.js、Deno、浏览器等），并且向后兼容 npm。 那么，怎么发布 jsr 包？1. 访问官网并使用 Github 授权登录官网：https:&#x2F;&#x2F;jsr.io&#x2F; 2. 通过官网新发布一个包，填写 Scope 和 Package name 3">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://static.yuhenabc.com/blog/jsr.png">
<meta property="og:image" content="https://static.yuhenabc.com/blog/jsr-settings-description.png">
<meta property="og:image" content="https://static.yuhenabc.com/blog/jsr-settings-runtime.png">
<meta property="og:image" content="https://static.yuhenabc.com/blog/jsr-settings-github.png">
<meta property="article:published_time" content="2024-07-12T02:46:01.000Z">
<meta property="article:modified_time" content="2024-10-25T15:32:37.867Z">
<meta property="article:author" content="yuhenabc">
<meta property="article:tag" content="deno">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://static.yuhenabc.com/blog/jsr.png">
  
  

  
<link rel="stylesheet" href="/css/style.css">

  
  
  


  

  
<!--    <link href='//fonts.useso.com/css?family=Titillium+Web:300,400,600' rel='stylesheet' type='text/css'>-->
<!--    <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">-->
  
  
<link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="wrap">
    <header id="header">
  <div id="header-outer" class="outer">
    <div class="container">
      <div class="container-inner">
        <div id="header-title">
          <h1 class="logo-wrap">
            <a href="/" class="logo"></a>
          </h1>
          
        </div>
        <div id="header-inner" class="nav-container">
          <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
          <div class="nav-container-inner">
            <ul id="main-nav">
              
            </ul>
            <nav id="sub-nav">
              <div id="search-form-wrap">
                
                  <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><input type="hidden" name="sitesearch" value="http://yuhenabc.com"></form>
                
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
    <div class="container">
      <div class="main-body container-inner">
        <div class="main-body-inner">
          <section id="main">
            <div class="main-body-header">

              <h1 class="header"><a class="page-title-link" href="/categories/%E5%8A%A8%E6%89%8B%E8%83%BD%E5%8A%9B/">动手能力</a></h1>
            </div>
            <div class="main-body-content">
              
  <article id="post-publish-jsr" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
      <!--  -->
      
        <header class="article-header">
          
  
    <h1 class="article-title" itemprop="name">
      怎么发布 jsr 包？有哪些注意点？
    </h1>
  

        </header>
      
      <p class="article-byline">
        <a href="/2024/07/12/publish-jsr/" class="article-date">
  <time datetime="2024-07-12T02:46:01.000Z" itemprop="datePublished">2024-07-12</time>
</a>
      </p>
      <div class="article-entry" itemprop="articleBody">
        <p>JavaScript Registry (JSR) 是 JavaScript 和 TypeScript 的现代化软件包仓库。JSR 适用于许多运行时（Node.js、Deno、浏览器等），并且向后兼容 npm。</p>
<h3 id="那么，怎么发布-jsr-包？"><a href="#那么，怎么发布-jsr-包？" class="headerlink" title="那么，怎么发布 jsr 包？"></a>那么，怎么发布 jsr 包？</h3><h5 id="1-访问官网并使用-Github-授权登录"><a href="#1-访问官网并使用-Github-授权登录" class="headerlink" title="1. 访问官网并使用 Github 授权登录"></a>1. 访问官网并使用 Github 授权登录</h5><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">官网：https://jsr.io/</span><br></pre></td></tr></table></figure>
<h5 id="2-通过官网新发布一个包，填写-Scope-和-Package-name"><a href="#2-通过官网新发布一个包，填写-Scope-和-Package-name" class="headerlink" title="2. 通过官网新发布一个包，填写 Scope 和 Package name"></a>2. 通过官网新发布一个包，填写 Scope 和 Package name</h5><p><img src="https://static.yuhenabc.com/blog/jsr.png" alt=""></p>
<h5 id="3-在你的项目中配置-jsr-json-或-deno-json"><a href="#3-在你的项目中配置-jsr-json-或-deno-json" class="headerlink" title="3. 在你的项目中配置 jsr.json (或 deno.json)"></a>3. 在你的项目中配置 jsr.json (或 deno.json)</h5><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@yuhenabc/bar&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exports&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./src/bar.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;publish&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;LICENSE&quot;</span><span class="punctuation">,</span> <span class="string">&quot;README.md&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.ts&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>因为 jsr 包原生只需要 TypeScript 源码，所以这里限制了下发布文件的范围，即：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;publish&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;LICENSE&quot;</span><span class="punctuation">,</span> <span class="string">&quot;README.md&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.ts&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>建议使用 <code>include</code> 的方式，包含 <code>LICENSE</code>、<code>README.md</code> 和 TypeScript 源码就够了。</p>
<h5 id="4-发布，执行-npx-jsr-publish-（或-deno-publish）"><a href="#4-发布，执行-npx-jsr-publish-（或-deno-publish）" class="headerlink" title="4. 发布，执行 npx jsr publish （或 deno publish）"></a>4. 发布，执行 <code>npx jsr publish</code> （或 <code>deno publish</code>）</h5><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npx jsr publish</span><br></pre></td></tr></table></figure>
<p>中间会有弹出网站并让你授权的过程，你批准后会有以下打印信息：</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">Checking for slow types in the public API...</span><br><span class="line">Visit https://jsr.io/auth?code=WPCV-PSLD to authorize publishing of @yuhenabc/bar</span><br><span class="line">Waiting...</span><br><span class="line">Authorization successful. Authenticated as yuhenabc</span><br><span class="line">Publishing @yuhenabc/bar@1.0.0 ...</span><br><span class="line">Successfully published @yuhenabc/bar@1.0.0</span><br><span class="line">Visit https://jsr.io/@yuhenabc/bar@1.0.0 for details</span><br><span class="line"></span><br><span class="line">Completed in 25s</span><br></pre></td></tr></table></figure>
<p>这样，你的第一个 jsr 包就发布成功了。</p>
<h3 id="那么，有哪些注意点？"><a href="#那么，有哪些注意点？" class="headerlink" title="那么，有哪些注意点？"></a>那么，有哪些注意点？</h3><h5 id="1-写好代码注释文档"><a href="#1-写好代码注释文档" class="headerlink" title="1. 写好代码注释文档"></a>1. 写好代码注释文档</h5><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Search the database with the given query.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> query This is the query to search with. It should be less than 50 chars to ensure good performance.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> limit The number of items to return. If unspecified, defaults to 20.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> The array of matched items.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">search</span>(<span class="params">query: <span class="built_in">string</span>, limit: <span class="built_in">number</span> = <span class="number">20</span></span>): <span class="built_in">string</span>[];</span><br></pre></td></tr></table></figure>
<p>像上面这样，你的源码的每个 <code>export</code> 最好包含注释文档，jsr.io 会根据它自动生成一份在线文档供其他开发者阅读。</p>
<p>注意，这是函数、变量级别的文档，和 <code>README.md</code> 整体文档没有冲突，将来会分别在不同的地方展示。</p>
<h5 id="2-配置好包的描述"><a href="#2-配置好包的描述" class="headerlink" title="2. 配置好包的描述"></a>2. 配置好包的描述</h5><p><img src="https://static.yuhenabc.com/blog/jsr-settings-description.png" alt=""></p>
<p>在 <code>Settings</code> 页面，填写包的描述并保存，它可以在搜索结果页面展示，突出包的功能，方便被选中。</p>
<h5 id="3-配置好支持的环境"><a href="#3-配置好支持的环境" class="headerlink" title="3. 配置好支持的环境"></a>3. 配置好支持的环境</h5><p><img src="https://static.yuhenabc.com/blog/jsr-settings-runtime.png" alt=""></p>
<p>同样在 <code>Settings</code> 页面，填写包的对 Cloudflare Workers、Node.js、Deno、Bun 和 Browsers 的支持情况并保存，可以友好地告诉其他开发者你的包对不同环境的支持程度。</p>
<h5 id="4-配置好包在-Github-对应的项目"><a href="#4-配置好包在-Github-对应的项目" class="headerlink" title="4. 配置好包在 Github 对应的项目"></a>4. 配置好包在 Github 对应的项目</h5><p><img src="https://static.yuhenabc.com/blog/jsr-settings-github.png" alt=""></p>
<p>同样在 <code>Settings</code> 页面，填写包在 Github 对应的项目，这样可以在将来利用 GitHub Actions 自动的发布到 jsr.io</p>
<p>做到以上几点，可以提高在 <code>Score</code> 页面的分数，同时提高在搜索结果中的排名。</p>

      </div>
      <footer class="article-footer">
        <a data-url="http://yuhenabc.com/2024/07/12/publish-jsr/" data-id="cm2ow5ckt0025cvoh3ecnh0v8" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
        
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/deno/" rel="tag">deno</a></li></ul>

      </footer>
    </div>
  </article>
  
  

            </div>
          </section>
          <aside id="sidebar">
  <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
  <div class="sidebar-top">
    <p>关注我 :</p>
    <ul class="social-links">
      
    </ul>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/08/02/mysql-shell-vs-mongo-shell/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <p class="article-nav-title">
        
          MySQL 8.0 和 MongoDB 在 NoSQL 方面的差异对比
        
      </p>
      <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
  
  
    <a href="/2024/06/18/auth-server/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <p class="article-nav-title">实现一个最简单的单点登录（SSO）系统</p>
      <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
    </a>
  
</nav>

  
  <div class="widgets-container">
    
  </div>
</aside>
        </div>
      </div>
    </div>
    <footer id="footer">
  
  <div class="container">
    <div class="container-inner">
      <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
      <div class="credit">
        <h1 class="logo-wrap">
          <a href="/" class="logo"></a>
        </h1>
        <p>&copy; 2024 yuhenabc</p>
        <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
      </div>
    </div>
  </div>
</footer>
    


<script src="/js/jquery.min.js"></script>









<script src="/js/html-patch.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>
